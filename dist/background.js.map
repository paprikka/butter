{"version":3,"file":"background.js","sources":["../background.ts"],"sourcesContent":["import { initAutoUpdater } from \"./src/auto-updater\";\nimport { log } from \"./src/log\";\nimport { ClientMessage } from \"./src/extension-message\";\nlog(\"init\");\n\nchrome.storage.local.get([\"is-first-run\"], (result) => {\n  if (result[\"is-first-run\"] === undefined) {\n    log(\"first run, opening first-run.html\");\n    chrome.storage.local.set({ \"is-first-run\": true });\n    chrome.tabs.create({ url: chrome.runtime.getURL(\"first-run.html\") });\n\n    return;\n  }\n\n  log(\"not first run, skipping first-run.html\");\n});\n\n// initAutoUpdater();\n\nchrome.runtime.onMessage.addListener(function (request: ClientMessage, sender) {\n  if (request.type === \"action:update-badge\") {\n    if (request.text) {\n      chrome.action.setBadgeText({\n        text: request.text,\n        tabId: sender.tab?.id,\n      });\n    }\n\n    if (request.color) {\n      chrome.action.setBadgeBackgroundColor({\n        color: request.color,\n        tabId: sender.tab?.id,\n      });\n    }\n  }\n\n  return true;\n});\n"],"names":["log","chrome","storage","local","get","result","undefined","set","tabs","create","url","runtime","getURL","onMessage","addListener","request","sender","type","text","action","setBadgeText","tabId","tab","id","color","setBadgeBackgroundColor"],"mappings":"6BAGAA,EAAI,MAAM,EAEVC,OAAOC,QAAQC,MAAMC,IAAI,CAAC,cAAc,EAAeC,GAAA,CACjDA,GAAAA,EAAO,cAAc,IAAMC,OAAW,CACxCN,EAAI,mCAAmC,EAChCE,OAAAA,QAAQC,MAAMI,IAAI,CAAE,eAAgB,EAAA,CAAM,EACjDN,OAAOO,KAAKC,OAAO,CAAEC,IAAKT,OAAOU,QAAQC,OAAO,gBAAgB,CAAA,CAAG,EAEnE,OAGFZ,EAAI,wCAAwC,CAC9C,CAAC,EAIDC,OAAOU,QAAQE,UAAUC,YAAY,SAAUC,EAAwBC,EAAQ,SACzED,OAAAA,EAAQE,OAAS,wBACfF,EAAQG,MACVjB,OAAOkB,OAAOC,aAAa,CACzBF,KAAMH,EAAQG,KACdG,OAAOL,EAAAA,EAAOM,MAAPN,YAAAA,EAAYO,EAAAA,CACpB,EAGCR,EAAQS,OACVvB,OAAOkB,OAAOM,wBAAwB,CACpCD,MAAOT,EAAQS,MACfH,OAAOL,EAAAA,EAAOM,MAAPN,YAAAA,EAAYO,EAAAA,CACpB,GAIE,EACT,CAAC"}