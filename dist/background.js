import{l as n}from"./log.js";const r=(e=!1)=>{n("initAutoUpdater"),(async()=>{const o=await fetch("./.timestamp").then(t=>t.json());for(;;){n("checking for updates...");const t=await fetch("./.timestamp").then(i=>i.json()).catch(()=>"unknown");if(t==="unknown"||t===o)await new Promise(i=>setTimeout(i,1e3));else{n(`new update found! ${new Date(o)} -> ${new Date(t)}`),e?window.location.reload():chrome.runtime.reload();return}}})()};n("init");chrome.runtime.onInstalled.addListener(()=>{chrome.tabs.create({url:chrome.runtime.getURL("first-run.html")})});r();chrome.runtime.onMessage.addListener(function(e,a){var o,t;return e.type==="action:update-badge"&&(e.text&&chrome.action.setBadgeText({text:e.text,tabId:(o=a.tab)==null?void 0:o.id}),e.color&&chrome.action.setBadgeBackgroundColor({color:e.color,tabId:(t=a.tab)==null?void 0:t.id})),!0});
//# sourceMappingURL=background.js.map
